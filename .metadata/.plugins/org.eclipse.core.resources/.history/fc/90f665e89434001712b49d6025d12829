package acquireResource;

public class AcquireCPU {
	private static String CMD = "cat /proc/stat";

	public static double getCPUUsageRate() {
		String info1=null;
		String info2=null;
		try {
			 info1=Runcommand.runCommand(CMD);
			Thread.sleep(1000);
			 info2=Runcommand.runCommand(CMD);
		} catch (Exception e) {
			
		}
		
		double total1 = 0.0;//第一次获取的CPU使用总时间
		double total2 = 0.0;//第二次获取的CPU使用总时间
		double CPUUsageRate=0.0;//CPU使用率
		String[] data1 = info1.split("\n");
		String[] strdata =data[0].split(" +");
		int[] numdata=new int[strdata.length-1];
		for (int i = 1; i < strdata.length; i++) {
			numdata[i - 1] = Integer.parseInt(strdata[i]);
			total += numdata[i - 1];
		}
		double idle = numdata[3];//CPU未使用的时间
		return CPUUsageRate = 1.0 - idle / total;
		
	}

	public static void main(String[] args) {
		String info = Runcommand.runCommand(CMD);
		System.out.println(info);
		System.out.println("CPU使用率："+getCPUUsageRate(info));
	}

}
